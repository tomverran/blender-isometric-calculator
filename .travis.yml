language: minimal
python:
- '3.8'
sudo: false
script:
- curl -LO https://github.com/elm/compiler/releases/download/0.19.1/binary-for-linux-64-bit.gz
- gunzip binary-for-linux-64-bit.gz -c > elm && chmod +x elm
- "./elm make src/Main.elm --output public/index.html"
deploy:
  provider: s3
  access_key_id: "$AWS_ACCESS_KEY_ID"
  secret_access_key: "$AWS_SECRET_ACCESS_KEY"
  bucket: "$DEPLOY_S3_BUCKET"
  region: eu-west-1
  skip_cleanup: true
  local_dir: public
  upload-dir: blender
  acl: public_read
after_deploy:
- pip install --user awscli
- export PATH="${PATH}:$(python3 -c 'import site; print(site.USER_BASE)')/bin"
- aws cloudfront create-invalidation --distribution-id ${CLOUDFRONT_DISTRIBUTION_ID} --paths "/*" > /dev/null
env:
  global:
  - secure: F6spEXYKjxuMftQxlD6PpADEGszghve9tXEkrrybXK5Zw3kK8xtWfhAXjxsWWnO8Q/E1f7Js+8xqzUccT3ueHUGc5qegAWxdrATEA28SfjpfWCaMfXn4Jjf3+Gkejo6agdm65bDTq2R1BdW3qHO6Uy6luQCREsMsjA5l/ZvepDiCzoYREh68SajGSPpSu+bPu3vhHwwIXD0Hv2Mp4GhfXzTXajKMBzMitFAWpVRryAzQTaeRoTCFxEfww28cuGGXBtVJXZe2RFwP70pLQB8vn1o+vMRM/Qi0qqP3OJ9k2RmUAwXiKdVcQ4nVbkdTvR22XTuOCpiUKIqElk90kOMZJt1qsuznv2GBapnJlYPlnBMC/kP2vSGOlcOlMp+2+e1Z76+jh1gsoFIqZI+rKAqeThJZRXUZ2hTxL/X/Py+TXqAgSOkRqtURVH1Pw+zhmqGN6k6SsY/nXHWC9WducGqC980hf+lDPO85sy5nTbHGKGiugcDvmbtyDC7A01U3kIX0VWaaSwK9mTDijl7Ej+BdixTa9pBa40D17qUIbmsrexUaI3CWJhpIK4MrymlMmBxTMuRlwb2DNKfuQ3RYONv0An++y9vD7BWAS8uFL/+eFFwuUOSoCJ6uxlak6vnglCb6QQKujqs/HBkgd9VyFoBC25xTRJsvKDv9kDh3aj4Gi7k=
  - secure: BRv1Ue9FBHUXAjnAyY66u5zbdR+YgCbu6JjvvXsytNMwdFKnMYaDNWmnM2fdFH8G77XiIDTAhrA46y8K3XJL5yVCd+mRYVbBjyO0oS48BsXMglM+BDWsLX2PLY2aVJRkjMgBJHc7veUfJcvKoQyGMvaaApEOCBA+JpeXW39jbUg97T6Gizh0SzTRyeCPmeojy5sU8IQqEuEDjBLGaDxZKOb3HfGB+dypQb3tGvH9nSHvChRKFG+r5boU5Ra2wFBt4/3WKpEGtpGviH67wJ+yShu+aTQpsWBkiduUmuNN0tNV6Sd3FF2EWIXQCWzxl1Qj8K89veGBBM2A8/8kYVknTFslj1I32EDqcrKQHkOERS4ABDFyJpOhMk5YK1Xr37EOaZXuWHf8juE4yB/rij0qPwcyUNqfDdaSLBcquUuS6eo99HRNc3/B14kx7Qz50gKWHKfCFPq60SoWAp+5XfelB08sdlxvJHuRMm/jVnt3dOGKWFan+pXVkQVaNQqkZ4Rg3khjULkF7+2ka+TDd8bp6gOvaEGeWLg0UqXS9/4xnpEe0vSjlGh58jTo3q3i/BvfLMonH1q1ILm1x8BqBhP3rw6DJFr2ddmtOr9dmjWsmN0/uvhxCarcpaOdXm4705PgCMd7bU3XSOyNM2FOlhf+7NL6PIcQlzG1AQZO6h/zp/M=
  - secure: gyRohw/Vy+9Hu9qZ8poKIlYIcJgF1xYUnkrfACE7kWloRvV0BzrZRolIKyn3Gx8PwzzXdAmd3BQUcCIOVxrP2IhQqgg9HqVdAalp4hc831yrvuhsXHdxE0kqwSwYCZNvKYGQvBhJa8roChcOjudQJbyRFd0sNGVLALSzwJ9xDTapKTP4eHQGBD+m59bVV/3Iu0Hi/nZRrp9Y5puoOv7uGBl0+EKaYR5ElMAr9VIKHVLt9Qh0Mx823Aw71vPuAdCckY2c3OIgRY8EyM7o7z/yJbgOG/dmm/fsCgRub9DJFLFEyYuChTDxELz2EO8C+gUWXFHrGISlEjauE3615tRAiOObjYfOHx4B72zQT/12LgKaJV4pg0WWDwQonSlqnIK2dPHwUeWXkFi/636sWnt21WPjIRyGaspN8bBZ6gsl743bZNMuhLkp9PKvTomzG8cG5sL19mChOOBdyqN11daqEoRq+cm9RdptwXhrtABLxIsPeT+elDGK6bnv8Srw5KCfaFlL2q4Wx2WowDSvj4vPN6DFPntCf4WG12tzAx/Eye8uzd6UmCxgXhnG3GW0dEanQ8nxQp2XyKmySibXs3OLuhGp8jVTpXKbm4pja3EPmncayr10X2U44LCdOO+5x+WtBGsIyk9QRnNAqBRJ1vg+F7XplhtYDKFdK3zKKtVEKe4=
  - secure: GzwhTHfOzgurZgEtWvR92DCnmQ9raQkwhq1zZ1HGyPJUxs2Pw04IzCGwMCX3cufOvMjCL1IoRgNZhGOZY6+GvKiL5hr+tHnF0sZ5evv0TbFuex7xcUBN9k+GLW56PVEUgxHqD1snUSqooSWf5GORz4AoO0q7BLVV2AISiorLjMLKEgEPMLyzdJf74GUXqUziqiEMwUqVHr01wTIXRcoAM618qrWHvrjiDecP56vnS0Ytc+tlzUF8nxQVm106oX/rjwYsdQ1dNLFPQiL6ZKj3mFWKrsTFfLaaiaXqGpx4Q6KIPAPAtRV2ybX0WC6oKZPcaW50YOZLYjNXpP5x0i3HYA3hSGgdo7GPtGhYgLNo4bWWyNtNO0gNgE/FVU5I8o1jZVaB7UIAjyzx3965SIVoHqHErAFP3thXpLNSVHYKSZzSDSjiw2DHBI94dQ0UToI3tLRRHCbExB+1S+OU0qEhlAFZtwbb8uNueZTj7Z+ZJ0lnia0yCQaMQrjg7gTwglWuQxMGLTyUJ55mirjOYROzfIFT4LwWCcmTTKKqYCTQ/TTAeBgLWDX1wZHy55D4mdEMJUr+SZHL46JqVAPmI3YGFOK0Frba6zMTLW0sPIu28/SJ4ZL1ttCg1BriTyLgRuidSUBZvTDuVdsh1UpZrf3PDd3uStJwx6PRrC9cskKSwo8=
